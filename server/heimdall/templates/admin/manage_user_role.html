{% extends "layout-page.html" %} {% block content %} {% load tags %}

<div class="inline-block" style="width:50%">
	<h2>Members of {{poolname}}:</h2>
		<table class="bordered">
			<thead>
				<tr>
					<th>Users</th>
					<th>Action</th>
				</tr>
			</thead>

			<tbody>
				{% for member in userRoles%}
				<tr>
					<form action="/heimdall/admin/manage_role" method="post"
						accept-charset="utf-8">
						{% csrf_token%} <input type="hidden" name="type" value="remove" />
						<input type="hidden" name="username" value="{{ member.user.username }}" />
						<input type="hidden" name="poolname" value="{{ poolname }}" />
					<td style="with: 100%">{{ member.user }}</td>
					<td><input type="submit" value="Remove user"></td>
					</form>
				</tr>
				{% endfor %}
			</tbody>

			<tfoot>
				<tr>
					<form action="/heimdall/admin/manage_role" method="post"
						accept-charset="utf-8">
						{% csrf_token%} <input type="hidden" name="type" value="add" />
						<input type="hidden" name="groupname" value="{{ poolname }}" />
					<td><select name="username"> {% for user in users %}
							<option>{{user.username}}</option> {% endfor %}
					</select></td>
					<td><input type="submit" value="Add to group" /></td>
				</tr>
				</form>
			</tfoot>
		</table>
</div>



<!-- Admins -->
{% ifusergroup heimdall-admin %}
<div class="inline-block" style="width:30%">
   <h2>Managers of group {{groupname}}:</h2>
	<table class="bordered">
		<thead>
			<tr>
				<th>User</th>
				<th>Role</th>
			</tr>
		</thead>
		<tbody>
				{% for users in users_in_pool %}
				<tr>
					<td>
						<span>{{users.user.username}}</span>
					</td>
					<td>
						 <form class="default-block" action="/heimdall/admin/perimeter_pool" method="post" accept-charset="utf-8">
						 {% csrf_token %}
						 	<input type="submit" name="remove" value="Remove"/>
						 </form>
					</td>
				</tr>
				{% endfor %}
			</tbody>
			<tfoot>
				
					<tr>
						<form action="/heimdall/admin/perimeter_pool" method="post" accept-charset="utf-8">
						{% csrf_token %}
						<td>
							<select name="hostname">
								{% for users in users_not_in_pool %}
									<option>{{users.user.username}}</option>
								{% endfor %}
							</select>
						</td>
						<td>
								<input type="submit" name="add" value="Change to manager"/>
								<input type="hidden" name="action" value="setmanager"/>
								<input type="hidden" name="poolname" value="poolname"/>
							 </form>
						</td>
						</form>
					</tr>
			</tfoot>
		</table>
	</form>
</div>	
{% endifusergroup %}


{% endblock %}
