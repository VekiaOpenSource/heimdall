{% extends "layout-page.html" %}

{% block content %}
<h2>Bienvenue sur le système de réplication Heimdall.</h2>
<div style="width:100%">
	<section>
		<div class="inline-block">
			<h3>Demandes en attentes: </h3>
		    <table class="datagrid bordered" width="100%">
				<thead>
		      		<tr>
				      	<th>date</th>
				      	<th>Utilisateur</th>
				      	<th>Serveur</th>
				      	<th>Connection avec utilisateur</th>
				      	<th>Commentaires</th>
		      		</tr>
		      	</thead>
		      	<tbody>
					{%for demand in demands%}
				      <tr class="{%if demand.priority == "HIGH" %}high-priority{%elif demand.priority == "NORMAL" %}normal-priority{%else%}low-priority{%endif%}">
				      	<td>{{demand.cdate|date:"d M Y G:i:s"}}</td>
				      	<td>{{demand.user.username}}</td>
				      	<td>{{demand.server.hostname}}</td>
				      	<td>{{demand.hostuser}}</td>
				      	<td>{{demand.comments}}</td>
				      </tr>
		      		{% endfor %}
		      	</tbody>
		     </table>
		</div>
	</section>
	<section>
		<div class="inline-block">
		<h3>Statistiques: </h3>
		
			  <table class="datagrid bordered"  width="100% ">
		      	<thead>
			      	<tr>
				      	<th>Statistique</th>
				      	<th>Valeur</th>
			      	</tr>
		      	</thead>
		      	<tbody>
			        <tr>
			        	<td>Nombre d'utilisateur enregistrés</td>
			        	<td>{{stats.user_count}}</td>
			        </tr>
			        <tr>
			        	<td>Nombre de serveurs enregistrés</td>
			        	<td>{{stats.server_count}}</td>
			        </tr>
			        <tr>
			        	<td>Nombre de demandes en attente</td>
			        	<td>{{stats.demands_count}}</td>
			        </tr>
			        <tr>
			        	<td>Nombre de permissions accordées</td>
			        	<td>{{stats.permissions_count}}</td>
			        </tr>
			         <tr>
			        	<td>Nombre de clés gérées</td>
			        	<td>{{stats.keys_count}}</td>
			        </tr>
		        </tbody>
		      </table>
		</div>
	</section>
</div>
{% endblock %}
